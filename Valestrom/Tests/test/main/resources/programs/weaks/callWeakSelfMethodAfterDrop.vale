
weakable struct Muta { hp int; }
weakable interface IUnit { func getHp(virtual self **IUnit) int; }
impl IUnit for Muta;
func getHp(self **Muta) int {
  maybeBorrowSelf = lock(self);
  ret if (maybeBorrowSelf.isEmpty()) {
      drop(maybeBorrowSelf);
      0
    } else {
      drop(maybeBorrowSelf);
      42
    }
}

exported func main() int {
  ownMuta = Muta(73);
  weakUnit **IUnit = **ownMuta;
  drop(ownMuta);
  ret getHp(weakUnit);
}